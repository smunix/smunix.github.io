<!DOCTYPE html>
<html>
  
<!-- Mirrored from ocharles.org.uk/blog/posts/2012-07-09-leaving-gentoo.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 31 Dec 2016 05:03:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Leaving Gentoo</title>
    <!-- <link rel="stylesheet" type="text/css" href="/css/reset.css" /> -->
    <!-- <link rel="stylesheet" type="text/css" href="/css/typography.css" /> -->
    <link rel="stylesheet" type="text/css" href="../css/syntax-highlighting.css" />
    <link rel="alternate" type="application/rss+xml" title="RSS" href="../posts.rss">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:300,100" rel="stylesheet" type="text/css">
    <style>
    /*! Typebase.less v0.1.0 | MIT License */
    /* Setup */
    html {
      /* Change default typefaces here */
      font-size: 125%;
      -webkit-font-smoothing: antialiased;
      font-family: 'Roboto Slab', serif;
      font-weight: 300;
    }
    /* Copy & Lists */
    p, pre {
      line-height: 1.5rem;
      margin-top: 1.5rem;
      margin-bottom: 0;
    }
    ul,
    ol {
      margin-top: 1.5rem;
      margin-bottom: 1.5rem;
    }
    ul li,
    ol li {
      line-height: 1.5rem;
    }
    ul ul,
    ol ul,
    ul ol,
    ol ol {
      margin-top: 0;
      margin-bottom: 0;
    }
    blockquote {
      line-height: 1.5rem;
      margin-top: 1.5rem;
      margin-bottom: 1.5rem;
    }
    /* Headings */
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      /* Change heading typefaces here */
      font-weight: 100;
      margin-top: 1.5rem;
      margin-bottom: 0;
      line-height: 1.5rem;
    }
    h1 {
      font-size: 3.242rem;
      line-height: 4.5rem;
      margin-top: 3rem;
      text-align: center;
      padding-bottom: 1.5rem;
    }
    h2 {
      font-size: 2.828rem;
      line-height: 3rem;
      margin-top: 3rem;
    }
    h3 {
      font-size: 1.414rem;
    }
    h4 {
      font-size: 0.707rem;
    }
    h5 {
      font-size: 0.4713333333333333rem;
    }
    h6 {
      font-size: 0.3535rem;
    }
    /* Tables */
    table {
      margin-top: 1.5rem;
      border-spacing: 0px;
      border-collapse: collapse;
    }
    table td,
    table th {
      padding: 0;
      line-height: 33px;
    }
    /* Leading paragraph text */
    .lead {
      font-size: 1.414rem;
    }
    /* Hug the block above you */
    .hug {
      margin-top: 0;
    }

    html {
      background: #eae3cb;
    }
    body {
      background-color: #fcf4dc;
      width: 40em;
      margin: 0 auto 2em;
      padding: 2em 3em;
      border: 1px solid #d9d2ba;
      border-top: none;
      color: #111;
    }
    h1 {
      border-bottom: 1px solid #555;
      /*text-align: center;
      padding-bottom: 10px;*/
    }
    /* h2,h3 { margin-top: 2em } */
    ul#icons {
      position: absolute;
      top: 10px;
      right: 10px;
      list-style-type: none;
      text-align: right;
    }
    ul#icons img { width: 16px; vertical-align: middle; }
    ul#icons a { color: transparent; font-style: italic; font-size: small; }
    ul#icons li:hover a { color: #aaa; text-decoration: none !important}
    #TOC { display: none; }
    pre {
      border-bottom: 1px dotted #d9d2ba;
      border-top: 1px dotted #d9d2ba;
    }
     a {
         text-decoration: none;
     }
    </style>
  </head>
  <body>
    <h1>Leaving Gentoo</h1>
<h2 id="picture-the-following">Picture the Following</h2>
<p>You’re happily at work coding away, completely in the zone and you realise you need some free disk space to do a bunch of database prototyping. No problem, you’ve got a spare hard drive in your machine thats unused, so you decide to wipe that drive and reclaim that space. You fire up <code>fdisk</code> and clear the disk ready to create just a single partition. You try and run <code>mkfs.ext3</code> but are warned that <code>/dev/sda</code> is still in use. That’s odd, it’s meant to be inactive - but never mind, a reboot will clear all of that up.</p>
<p>Wait, why is the system not coming up? Invalid system disk? Your heart sinks as you suddenly realise you’ve just deleted the partition table of the wrong disk - you’ve actually just removed your system partition table and are now left without an unbootable machine.</p>
<p>You spend an hour or so trying to fix things, prodding around with <code>dumpe2fs</code> and the like, but eventually decide to just <code>dd</code> the drive somewhere else and reinstall and just get back to work.</p>
<p>The next part of this story will be continued 8 hours later.</p>
<h2 id="a-shift-from-worker-to-worked">A Shift From Worker to Worked</h2>
<p>It’s an idiotic, stupid mistake to make, and could have been quite easily solved by just taking the time to really read the output of <code>fdisk</code>. However, that doesn’t change the fact that the above scenario did happen. I could have lived with that, but my choice of operating system - <a href="http://gentoo.org/">Gentoo</a> - added to the torture.</p>
<p>I’ve been a huge fan of Gentoo, and a happy user for the last 3 years, but Thursday’s events have led me to critically re-evaluate my choice of distribution. Gentoo is simply no longer catering to a productive work environment.</p>
<p>Gentoo is almost entirely a source based distribution, which means a lot of time will be spent compiling packages, rather than installing a prebuilt binary. In this case, over 8 hours. My workspace consists of XMonad, Chromium, Emacs and rxvt-unicode, and little more - this is not a complicated set up. However, there is a base cost of any system - just getting a working kernel and X11 is significantly time consuming.</p>
<p>You might argue that the above example is extreme, it’s not every day you need to do massive compilations. This is true, but even small adjustments to a machine become more laborious than they need to be. Gentoo ebuilds have a system of <code>USE</code> flags, which allow you to precisely define what you want built from a package. It can be inviting to constrain your <code>USE</code> flags to the bare minimum, but in the last year I must have had to recompile PostgreSQL at least 3 times for UUID, Python and Perl support. This is not a background task, this is something blocking my work.</p>
<p>I chose Gentoo not for it’s source based nature, but because it encourages a deep understanding that not many other distributions require. The installation process requires understanding partition tables, <code>chroot</code>, various <code>etc</code> configuration files, and so on. This is fantastic hands on knowledge that would be hard to pick up from simply reading things.</p>
<p>There is also a definite feeling of confidence in the system when things are working correctly. Sadly, getting to a correct working state is impaired by being source based. Recompling a library can lead to broken packages down the line, if you’re not careful to rebuild reverse dependencies. I’ve impaired my work by accidently recompiling a dependency of Chromium, and having to wait hours for Chromium to rebuild just to carry on with work.</p>
<p>This, along with increased build times, leads to a significant role reversal. I am no longer working my system, it is now working me.</p>
<h2 id="onwards-to-pastures-new">Onwards to Pastures New</h2>
<p>I’ve decided to return to <a href="http://archlinux.org/">Arch Linux</a>, a distribution I last used at university around 4 years ago. Arch has officially supported binary repositories, but also plays well when compiling from source, with it’s AUR/pkgconfig system. Pacman is an acceptable package manager, and I love its speed, but I do long for the integrity that <a href="http://paludis.exherbo.org/">Paludis</a> gave me. Arch is also driven by simple configuration files in <code>etc</code>, leading to a very transparent system configuration.</p>
<p>One of my worries is that it feels like Arch will make it easy to build up a system with a lot of installed packages, but not much understanding as to why I need certain packages. Optional dependencies seem to be handled quite loosely, without any link between the dependency and dependent package.</p>
<p>I’ve also changed away from the normal init system to systemd. This is pretty orthogonal to the issues I was experiencing, but I felt like it was appropriate time to make some subtle changes. I am so far loving systemd, it feels very polished compared to a bunch of odd scripts all over the place, and it’s certainly fast.</p>
<p>In conclusion, I had a great time with Gentoo and have learnt a lot about configuring Linux systems. I’m glad I’m leaving with generally positive experiences, and certainly don’t have any remorse about investing a few years into it. Though I must say, it’s certainly refreshing to have a working desktop environment in less than an hour.</p>
<hr />
<p style="font-style: italic">You can contact me via email
at <a href="mailto:ollie@ocharles.org.uk">ollie@ocharles.org.uk</a> or tweet to
me <a href="http://twitter.com/acid2">@acid2</a>. I share almost all of my work
at <a href="http://github.com/ocharles">GitHub</a>.
  This <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" rel="dct:type">post</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons Attribution-NonCommercial-NoDerivs 3.0 Unported License</a>.</p><p>I accept Bitcoin donations: <a href="bitcoin:14SsYeM3dmcUxj3cLz7JBQnhNdhg7dUiJn"><code>14SsYeM3dmcUxj3cLz7JBQnhNdhg7dUiJn</code></a>. Alternatively, please consider leaving a tip on <script id="fbxofs4">(function(i){var f,s=document.getElementById(i);f=document.createElement('iframe');f.src='//api.flattr.com/button/view/?uid=ocharles&button=compact&url='+encodeURIComponent(document.URL);f.title='Flattr';f.height=20;f.width=110;f.style.borderWidth=0;s.parentNode.insertBefore(f,s);})('fbxofs4');</script>
</p>
<hr />

    <ul id="icons">
      <li>
        <a href="https://coderwall.com/ocharles">
          <img alt="Endorse ocharles on Coderwall" src="http://api.coderwall.com/ocharles/endorsecount.png" style="width: auto" /></a></li>
      <li>
        <a href="http://twitter.com/acid2">Twitter
          <img src="../img/twitter.ico" /></a></li>
      <li>
        <a href="https://alpha.app.net/ocharles">App.net
          <img src="../img/adn.ico" /></a></li>
      <li>
        <a href="http://github.com/ocharles">GitHub
          <img src="../img/github.ico" /></a></li>
      <li>
        <a href="http://musicbrainz.org/user/acid2">MusicBrainz
          <img src="../img/musicbrainz.ico" /></a></li>
      <li>
        <a href="http://last.fm/user/acid2">Last.fm
          <img src="../img/lastfm.ico" /></a></li>
      <li>
        <a href="http://www.goodreads.com/user/show/8961303-oliver-charles">
          GoodReads <img src="../img/goodreads.ico" /></a></li>
      <li>
        <a href="http://www.soundcloud.com/bifurcations">
          SoundCloud (experimental) <img src="../img/soundcloud.ico" /></a></li>
      <li>
        <a href="http://www.soundcloud.com/cycles">
          SoundCloud (older work) <img src="../img/soundcloud.ico" /></a></li>
      <li>
        <a href="../posts.rss">RSS (posts)
          <img src="../img/rss.svg" /></a></li>
    </ul>
  </body>

<!-- Mirrored from ocharles.org.uk/blog/posts/2012-07-09-leaving-gentoo.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 31 Dec 2016 05:03:47 GMT -->
</html>
